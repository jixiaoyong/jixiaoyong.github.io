import{f as W,q as X,s as M,t as Z,v as ee,x as se,y as te,z as C,g as A,A as e,B as le,l as ae,C as oe,R as F,D as re,E as ce,F as ie,G as he,H as ue,I,J as T,K as me,L as ne,M as pe,j as de,N as ve,O as fe,P as ye,Q as be,S as U,T as ge,U as x}from"./app-DQAvLgyB.js";const Ee=["/","/about.html","/posts/1c56d6b9.html","/posts/12cb887a.html","/posts/5754fcd2.html","/posts/c0fefed0.html","/posts/caa169b7.html","/posts/e5860bb5.html","/posts/ad4c562c.html","/posts/5962504e.html","/posts/f931e8ae.html","/posts/2270057c.html","/posts/1b0362b.html","/posts/b35fe0f7.html","/posts/b0dc2559.html","/posts/c2f123c.html","/posts/76d69fc6.html","/posts/a3a3dc4c.html","/posts/b4832cd1.html","/posts/3b69424a.html","/posts/6f46f598.html","/posts/104c9058.html","/posts/7e97a976.html","/posts/e3bb9a54.html","/posts/5c023044.html","/posts/a2c96aac.html","/posts/e41787ec.html","/posts/f20627c9.html","/posts/a2863875.html","/posts/26eab50a.html","/posts/aacd75ab.html","/posts/fcfc830b.html","/posts/7ee9086b.html","/posts/e15dda2e.html","/posts/2822c354.html","/posts/c04fdc6c.html","/posts/db62c118.html","/posts/3db5282.html","/posts/4cbcfe72.html","/posts/4c220635.html","/posts/767a594.html","/posts/e35c106d.html","/posts/9e235953.html","/posts/47c43abe.html","/posts/6ec43bd8.html","/posts/adf541c0.html","/posts/62beedda.html","/posts/820d6240.html","/posts/1912667a.html","/posts/23ac516a.html","/posts/727d7800.html","/posts/ae8e53be.html","/posts/60f8d92f.html","/posts/d3bdcb53.html","/posts/4a17b156.html","/posts/f31c11c5.html","/posts/b3994218.html","/posts/cf83ef31.html","/posts/ff927bd4.html","/posts/875283bd.html","/posts/b0793c74.html","/posts/9a8e41a8.html","/posts/1fd30f6e.html","/posts/b2cdb69e.html","/posts/36721083.html","/posts/3e9e8cb1.html","/posts/375fcf66.html","/posts/b4abf652.html","/posts/3f6454bb.html","/posts/87a89a43.html","/posts/9d9183ec.html","/posts/24967ad4.html","/posts/135b2780.html","/posts/8a52763a.html","/posts/fd5546ac.html","/posts/10414aef.html","/posts/53875104.html","/posts/a64dc0bc.html","/posts/25db0a11.html","/posts/ca532ade.html","/posts/d0edc1ed.html","/posts/6ff87ae7.html","/posts/d9a2e1ba.html","/posts/a8f97c56.html","/posts/6e070881.html","/posts/9c0ccf0d.html","/posts/a951661c.html","/posts/550e5790.html","/posts/1a589649.html","/posts/27065732.html","/posts/b00ac86a.html","/posts/f7965978.html","/posts/8d60b485.html","/posts/1f6681a0.html","/posts/101c73f.html","/posts/a71f2ecc.html","/posts/b3af796a.html","/posts/851be5ef.html","/posts/9a784fe0.html","/posts/8d059318.html","/posts/125c8a12.html","/posts/11c01876.html","/posts/466fbe25.html","/posts/2041f2cb.html","/posts/af2aa19e.html","/404.html","/posts/","/category/","/tag/","/tag/android/","/tag/aidl/","/tag/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","/tag/dagger2/","/tag/dart/","/tag/flutter/","/tag/jvm/","/tag/java/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E6%B3%A8%E8%A7%A3/","/tag/kotlin/","/tag/lambda/","/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","/tag/linux/","/tag/python/","/tag/ci/","/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/article/","/star/","/timeline/"],He="SLIMSEARCH_QUERY_HISTORY",y=U(He,[]),Ae=()=>{const{queryHistoryCount:a}=x;return{enabled:a>0,queryHistories:y,addQueryHistory:i=>{y.value=Array.from(new Set([i,...y.value.slice(0,a-1)]))},removeQueryHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}},B=a=>Ee[a.id]+("anchor"in a?`#${a.anchor}`:""),xe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:j}=x,b=U(xe,[]),Qe=()=>({enabled:j>0,resultHistories:b,addResultHistory:c=>{{const i={link:B(c),display:c.display};"header"in c&&(i.header=c.header),b.value=[i,...b.value.slice(0,j-1)]}},removeResultHistory:c=>{b.value=[...b.value.slice(0,c),...b.value.slice(c+1)]}}),Re=a=>{const c=me(),i=M(),Q=ne(),o=C(0),g=A(()=>o.value>0),m=pe([]);return de(()=>{const{search:R,terminate:d}=ve(),E=ye(v=>{const{resultsFilter:S=l=>l,querySplitter:f,suggestionsFilter:D,...r}=c.value;v?(o.value+=1,R(v,i.value,r).then(l=>S(l,v,i.value,Q.value)).then(l=>{o.value-=1,m.value=l}).catch(l=>{console.warn(l),o.value-=1,o.value||(m.value=[])})):m.value=[]},x.searchDelay-x.suggestDelay,{maxWait:5e3});fe([a,i],([v])=>E(v.join(" "))),be(()=>{d()})}),{isSearching:g,results:m}};var ke=W({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:c}){const i=X(),Q=M(),o=Z(ee),{addQueryHistory:g,queryHistories:m,removeQueryHistory:R}=Ae(),{resultHistories:d,addResultHistory:E,removeResultHistory:v}=Qe(),S=se(a,"queries"),{results:f,isSearching:D}=Re(S),r=te({isQuery:!0,index:0}),l=C(0),n=C(0),L=A(()=>m.value.length>0||d.value.length>0),k=A(()=>f.value.length>0),w=A(()=>f.value[l.value]||null),O=()=>{const{isQuery:s,index:t}=r;t===0?(r.isQuery=!s,r.index=s?d.value.length-1:m.value.length-1):r.index=t-1},P=()=>{const{isQuery:s,index:t}=r;t===(s?m.value.length-1:d.value.length-1)?(r.isQuery=!s,r.index=0):r.index=t+1},_=()=>{l.value=l.value>0?l.value-1:f.value.length-1,n.value=w.value.contents.length-1},Y=()=>{l.value=l.value<f.value.length-1?l.value+1:0,n.value=0},z=()=>{n.value<w.value.contents.length-1?n.value+=1:Y()},G=()=>{n.value>0?n.value-=1:_()},q=s=>s.map(t=>ge(t)?t:e(t[0],t[1])),J=s=>{if(s.type==="customField"){const t=he[s.index]||"$content",[p,h=""]=ue(t)?t[Q.value].split("$content"):t.split("$content");return s.display.map(u=>e("div",q([p,...u,h])))}return s.display.map(t=>e("div",q(t)))},H=()=>{l.value=0,n.value=0,c("updateQuery",""),c("close")},K=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},o.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((s,t)=>{const p=r.isQuery&&r.index===t;return e("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p,onClick:()=>{c("updateQuery",s)}},e("div",[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},s),e("button",{type:"button",class:"slimsearch-remove-icon",title:o.value.remove,"aria-label":o.value.remove,innerHTML:T,onClick:h=>{h.preventDefault(),h.stopPropagation(),R(t)}})]))}))])),N=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},o.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((s,t)=>{const p=!r.isQuery&&r.index===t;return e("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p},e(F,{to:s.link,onClick:()=>{H()}},()=>[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[s.header?e("div",{class:"slimsearch-record-content-header"},s.header):null,e("div",s.display.map(h=>q(h)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:o.value.remove,"aria-label":o.value.remove,innerHTML:T,onClick:h=>{h.preventDefault(),h.stopPropagation(),v(t)}})]))}))]));return le("keydown",s=>{if(a.isFocusing){if(k.value){if(s.key==="ArrowUp")G();else if(s.key==="ArrowDown")z();else if(s.key==="Enter"){const t=w.value.contents[n.value];g(a.queries.join(" ")),E(t),i.push(B(t)),H()}}else if(s.key==="ArrowUp")O();else if(s.key==="ArrowDown")P();else if(s.key==="Enter"){const{index:t}=r;r.isQuery?(s.preventDefault(),c("updateQuery",m.value[t])):(i.push(d.value[t].link),H())}}}),ae([l,n],()=>{var s;(s=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!k.value:!L.value}]},a.queries.length?D.value?e(oe,{hint:o.value.searching}):k.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},f.value.map(({title:s,contents:t},p)=>{const h=l.value===p;return e("div",{class:["slimsearch-record",{active:h}],role:"group","aria-selected":h},[e("div",{class:"slimsearch-record-title"},s||o.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},t.map((u,V)=>{const $=h&&n.value===V;return e("li",{class:["slimsearch-record-matches",{active:$}],role:"option","aria-selected":$},e(F,{to:B(u),onClick:()=>{g(a.queries.join(" ")),E(u),H()}},()=>[u.type==="text"?null:e(u.type==="title"?re:u.type==="heading"?ce:ie,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",J(u))])]))}))])})):o.value.emptyResult:L.value?[K(),N()]:o.value.emptyHistory)}});export{ke as default};
