import{_ as t,r as o,o as l,c as i,a as n,b as a,d as e,e as p}from"./app-9ad43e8a.js";const c={},r=p(`<p>本文为笔记性质，尚未成文。</p><h2 id="view-的坐标" tabindex="-1"><a class="header-anchor" href="#view-的坐标" aria-hidden="true">#</a> View 的坐标</h2><p>Android 中的坐标，以屏幕左上角顶点为原点 (0,0)，以横轴为 x 轴，竖轴为 y 轴，数值依次递增。</p><p>View 的坐标信息有以下几种，其坐标都是以父 View 的左上角顶点为原点：</p><ul><li><p>x，y 是 View 的左上角坐标。</p></li><li><p>translationX，translationY 是 View 左上角顶点与父容器左上角顶点的偏移量，默认为 0。</p></li><li><p>left，top 是分别是 View 左上角顶点的 x 轴，y 轴坐标。</p><p>right，bottom 分别是 View 右下角顶点的 x 轴，y 轴坐标。</p></li></ul><blockquote><p>注意</p></blockquote><p>x = translationX + left；</p><p>y = translationY + top；</p><p>改变 translationX/Y 的值便可以更改<strong>View 的位置</strong>。当 View 平移的时候，代表原始位置信息的 left，right，top，bottom 的值并不会变化。</p><p>在 OnTouch 事件中，我们可以从 event 得到两种值：</p><p>event.rawX,event.rawY 代表 相对于手机屏幕原点的坐标</p><p>event.X,event.Y 代表 相对于当前 View 左上角的坐标</p><p>TouchSlop 则代表认为滑动开始的最小距离</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>ViewConfiguration<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scaledTouchSlop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="滑动" tabindex="-1"><a class="header-anchor" href="#滑动" aria-hidden="true">#</a> 滑动</h2><p>mScroller.startScroll() 方法可以实现平滑的滑动</p><p>scrollX,scrollY 表示的是<em>view 的 X，Y 坐标减去 view 内容的 X，Y 坐标</em>。</p><p>所以 scrollX&gt;0，则表示 view 内容向左移动，scrollX&lt;0 表示 view 内容向右移动。类似于窗户 (view) 位置不变，景色 (view 内容) 的 scrollX&gt;0 即景色向右移动，则在窗户中看到的效果是景色向窗户左边移动。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">private</span> <span class="token keyword">val</span> mScroller <span class="token operator">=</span> <span class="token function">Scroller</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">smoothScrollBy</span><span class="token punctuation">(</span>destX<span class="token operator">:</span> Int<span class="token punctuation">,</span> destY<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    mScroller<span class="token punctuation">.</span><span class="token function">startScroll</span><span class="token punctuation">(</span>scrollX<span class="token punctuation">,</span> scrollY<span class="token punctuation">,</span> destX<span class="token punctuation">,</span> destY<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token comment">//destX, destY 的值如果是正的话，会向左，上方移动</span>
    <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">computeScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mScroller<span class="token punctuation">.</span><span class="token function">computeScrollOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">scrollTo</span><span class="token punctuation">(</span>mScroller<span class="token punctuation">.</span>currX<span class="token punctuation">,</span> mScroller<span class="token punctuation">.</span>currY<span class="token punctuation">)</span>
        <span class="token function">postInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Scroller 不能使 View 滑动，而只能配合 View 的 computeScroll() 方法实现是<strong>View 的内容滑动</strong>的效果。</p><ul><li>mScroller.startScroll() 记录下要滑动的数据，而 invalidate() 通知 View 重绘；</li><li>每次重绘都会调用 computeScroll() 方法，利用 mScroller 计算出接下来要 scrollTo() 的具体值并执行，再次 postInvalidate() 通知 View 重绘；</li><li>如此反复直到绘制滑动完毕。</li></ul><p>上述无论是 translationX 还是 scrollX 等引起的 view 变化，都不能改变 View 的定位（left，right，top，bottom 值），而如果<strong>更改 margin 的值，则可以更改 View 的定位</strong>。</p><h2 id="window-和-windowmanager" tabindex="-1"><a class="header-anchor" href="#window-和-windowmanager" aria-hidden="true">#</a> Window 和 WindowManager</h2><p>WindowManager.LayoutParams.flags 有三个常用选项：</p><ul><li>WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL // 只处理 Window 区域内的点击事件，之外的交给其他 Window 处理</li><li>WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE // 不接受输入事件，不获取焦点，同时会开启 FLAG_NOT_TOUCH_MODAL，最终事件会传递给下层具有焦点的 Window</li><li>WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED // 让 Window 显示在锁屏界面上</li></ul><p>WindowManager.LayoutParams.type 代表 Window 的类型 (三个)：</p><ul><li>应用 Window 对应一个 Activity。<code>z-ordered</code>:1~99</li><li>子 Window 不能单独存在，附属在特定的父 Window 中，如 Dialog。<code>z-ordered</code>:1000~1999</li><li>系统 Window 需要系统权限，如 Toast，状态栏等。<code>z-ordered</code>:2000~2999</li></ul><p><code>z-ordered</code>值大的 Window 会覆盖掉低值的 Window。</p><h2 id="todo" tabindex="-1"><a class="header-anchor" href="#todo" aria-hidden="true">#</a> TODO</h2>`,29),d=n("br",null,null,-1),u={href:"https://www.jianshu.com/p/130fdd755471",target:"_blank",rel:"noopener noreferrer"},w=n("br",null,null,-1),k={href:"https://blog.csdn.net/qq_15807167/article/details/51637678",target:"_blank",rel:"noopener noreferrer"},h=n("br",null,null,-1),m={href:"https://www.cnblogs.com/dasusu/p/9159904.html",target:"_blank",rel:"noopener noreferrer"},v=n("br",null,null,-1),b=n("s",null,"滑动展示删除按钮",-1),_={href:"https://www.jianshu.com/p/9bfed6e127cc",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/jixiaoyong/DiyWidget/blob/master/diy-widget/src/main/java/cf/android666/applibrary/SwipeRecyclerView.kt",target:"_blank",rel:"noopener noreferrer"},g=n("h2",{id:"参考资料",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#参考资料","aria-hidden":"true"},"#"),a(" 参考资料")],-1),y={href:"https://blog.csdn.net/Holmofy/article/details/53959511",target:"_blank",rel:"noopener noreferrer"};function S(V,W){const s=o("ExternalLinkIcon");return l(),i("div",null,[r,n("p",null,[a("recycleview 滑动"),d,a(" ItemTouchHelper 源码分析 "),n("a",u,[a("https://www.jianshu.com/p/130fdd755471"),e(s)]),w,a(" 嵌套滑动 "),n("a",k,[a("https://blog.csdn.net/qq_15807167/article/details/51637678"),e(s)]),h,n("a",m,[a("https://www.cnblogs.com/dasusu/p/9159904.html"),e(s)]),v,b,a(),n("a",_,[a("https://www.jianshu.com/p/9bfed6e127cc"),e(s)]),a(" >> 对应的 demo："),n("a",f,[a("https://github.com/jixiaoyong/DiyWidget/blob/master/diy-widget/src/main/java/cf/android666/applibrary/SwipeRecyclerView.kt"),e(s)])]),g,n("p",null,[n("a",y,[a("View 滑动效果常用属性详解：scroll、translation、LayoutParams"),e(s)])])])}const X=t(c,[["render",S],["__file","1b0362b.html.vue"]]);export{X as default};
