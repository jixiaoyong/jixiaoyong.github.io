import{u as U,f as st,g as et,h as Y,i as lt,P as at,t as ot,j as rt,k as L,l as k,m as ut,n as M,p as e,q as ct,R as T,s as pt,v as it,x as ht,C as mt,y as nt,z as dt,A as vt,B as ft,D as yt,E as Q,F as bt,G as gt,H as Et,I as $,J as I,K as Ht}from"./app-CnRe2vo3.js";const Rt=["/","/about.html","/posts/1c56d6b9.html","/posts/12cb887a.html","/posts/5754fcd2.html","/posts/c0fefed0.html","/posts/caa169b7.html","/posts/e5860bb5.html","/posts/ad4c562c.html","/posts/5962504e.html","/posts/f931e8ae.html","/posts/2270057c.html","/posts/1b0362b.html","/posts/b35fe0f7.html","/posts/b0dc2559.html","/posts/c2f123c.html","/posts/76d69fc6.html","/posts/a3a3dc4c.html","/posts/b4832cd1.html","/posts/3b69424a.html","/posts/6f46f598.html","/posts/104c9058.html","/posts/7e97a976.html","/posts/e3bb9a54.html","/posts/5c023044.html","/posts/a2c96aac.html","/posts/e41787ec.html","/posts/f20627c9.html","/posts/a2863875.html","/posts/26eab50a.html","/posts/aacd75ab.html","/posts/fcfc830b.html","/posts/7ee9086b.html","/posts/e15dda2e.html","/posts/2822c354.html","/posts/c04fdc6c.html","/posts/db62c118.html","/posts/3db5282.html","/posts/4cbcfe72.html","/posts/4c220635.html","/posts/767a594.html","/posts/e35c106d.html","/posts/9e235953.html","/posts/47c43abe.html","/posts/6ec43bd8.html","/posts/adf541c0.html","/posts/62beedda.html","/posts/820d6240.html","/posts/1912667a.html","/posts/23ac516a.html","/posts/727d7800.html","/posts/ae8e53be.html","/posts/60f8d92f.html","/posts/d3bdcb53.html","/posts/4a17b156.html","/posts/f31c11c5.html","/posts/b3994218.html","/posts/cf83ef31.html","/posts/ff927bd4.html","/posts/875283bd.html","/posts/b0793c74.html","/posts/9a8e41a8.html","/posts/1fd30f6e.html","/posts/b2cdb69e.html","/posts/36721083.html","/posts/3e9e8cb1.html","/posts/375fcf66.html","/posts/b4abf652.html","/posts/3f6454bb.html","/posts/87a89a43.html","/posts/9d9183ec.html","/posts/24967ad4.html","/posts/135b2780.html","/posts/8a52763a.html","/posts/fd5546ac.html","/posts/10414aef.html","/posts/53875104.html","/posts/a64dc0bc.html","/posts/25db0a11.html","/posts/ca532ade.html","/posts/d0edc1ed.html","/posts/6ff87ae7.html","/posts/d9a2e1ba.html","/posts/a8f97c56.html","/posts/6e070881.html","/posts/9c0ccf0d.html","/posts/a951661c.html","/posts/550e5790.html","/posts/1a589649.html","/posts/27065732.html","/posts/b00ac86a.html","/posts/f7965978.html","/posts/8d60b485.html","/posts/1f6681a0.html","/posts/101c73f.html","/posts/a71f2ecc.html","/posts/b3af796a.html","/posts/851be5ef.html","/posts/9a784fe0.html","/posts/8d059318.html","/posts/125c8a12.html","/posts/11c01876.html","/posts/466fbe25.html","/posts/2041f2cb.html","/posts/af2aa19e.html","/404.html","/posts/","/category/","/tag/","/tag/android/","/tag/aidl/","/tag/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","/tag/dagger2/","/tag/dart/","/tag/flutter/","/tag/jvm/","/tag/java/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E6%B3%A8%E8%A7%A3/","/tag/kotlin/","/tag/lambda/","/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","/tag/linux/","/tag/python/","/tag/ci/","/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/article/","/star/","/timeline/"],At="SEARCH_PRO_QUERY_HISTORY",y=U(At,[]),kt=()=>{const{queryHistoryCount:l}=Q,a=l>0;return{enabled:a,queryHistory:y,addQueryHistory:o=>{a&&(y.value=Array.from(new Set([o,...y.value.slice(0,l-1)])))},removeQueryHistory:o=>{y.value=[...y.value.slice(0,o),...y.value.slice(o+1)]}}},F=l=>Rt[l.id]+("anchor"in l?`#${l.anchor}`:""),Qt="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=Q,b=U(Qt,[]),wt=()=>{const l=_>0;return{enabled:l,resultHistory:b,addResultHistory:a=>{if(l){const o={link:F(a),display:a.display};"header"in a&&(o.header=a.header),b.value=[o,...b.value.slice(0,_-1)]}},removeResultHistory:a=>{b.value=[...b.value.slice(0,a),...b.value.slice(a+1)]}}},xt=l=>{const a=mt(),o=Y(),w=nt(),u=L(0),H=k(()=>u.value>0),d=dt([]);return vt(()=>{const{search:v,terminate:x}=ft(),g=yt(i=>{const E=i.join(" "),{searchFilter:q=n=>n,splitWord:S,suggestionsFilter:j,...f}=a.value;E?(u.value+=1,v(i.join(" "),o.value,f).then(n=>q(n,E,o.value,w.value)).then(n=>{u.value-=1,d.value=n}).catch(n=>{console.warn(n),u.value-=1,u.value||(d.value=[])})):d.value=[]},Q.searchDelay-Q.suggestDelay);M([l,o],([i])=>g(i),{immediate:!0}),bt(()=>{x()})}),{isSearching:H,results:d}};var St=st({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const o=et(),w=Y(),u=lt(at),{enabled:H,addQueryHistory:d,queryHistory:v,removeQueryHistory:x}=kt(),{enabled:g,resultHistory:i,addResultHistory:E,removeResultHistory:q}=wt(),S=H||g,j=ot(l,"queries"),{results:f,isSearching:n}=xt(j),r=rt({isQuery:!0,index:0}),h=L(0),m=L(0),P=k(()=>S&&(v.value.length>0||i.value.length>0)),B=k(()=>f.value.length>0),C=k(()=>f.value[h.value]||null),z=()=>{const{isQuery:t,index:s}=r;s===0?(r.isQuery=!t,r.index=t?i.value.length-1:v.value.length-1):r.index=s-1},G=()=>{const{isQuery:t,index:s}=r;s===(t?v.value.length-1:i.value.length-1)?(r.isQuery=!t,r.index=0):r.index=s+1},J=()=>{h.value=h.value>0?h.value-1:f.value.length-1,m.value=C.value.contents.length-1},K=()=>{h.value=h.value<f.value.length-1?h.value+1:0,m.value=0},V=()=>{m.value<C.value.contents.length-1?m.value+=1:K()},N=()=>{m.value>0?m.value-=1:J()},D=t=>t.map(s=>Ht(s)?s:e(s[0],s[1])),W=t=>{if(t.type==="customField"){const s=gt[t.index]||"$content",[c,A=""]=Et(s)?s[w.value].split("$content"):s.split("$content");return t.display.map(p=>e("div",D([c,...p,A])))}return t.display.map(s=>e("div",D(s)))},R=()=>{h.value=0,m.value=0,a("updateQuery",""),a("close")},X=()=>H?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},u.value.queryHistory),v.value.map((t,s)=>e("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===s}],onClick:()=>{a("updateQuery",t)}},[e($,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},t),e("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),x(s)}})]))])):null,Z=()=>g?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},u.value.resultHistory),i.value.map((t,s)=>e(T,{to:t.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===s}],onClick:()=>{R()}},()=>[e($,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[t.header?e("div",{class:"content-header"},t.header):null,e("div",t.display.map(c=>D(c)).flat())]),e("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),q(s)}})]))])):null;return ut("keydown",t=>{if(l.isFocusing){if(B.value){if(t.key==="ArrowUp")N();else if(t.key==="ArrowDown")V();else if(t.key==="Enter"){const s=C.value.contents[m.value];d(l.queries.join(" ")),E(s),o.push(F(s)),R()}}else if(g){if(t.key==="ArrowUp")z();else if(t.key==="ArrowDown")G();else if(t.key==="Enter"){const{index:s}=r;r.isQuery?(a("updateQuery",v.value[s]),t.preventDefault()):(o.push(i.value[s].link),R())}}}}),M([h,m],()=>{var t;(t=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!B.value:!P.value}],id:"search-pro-results"},l.queries.length?n.value?e(ct,{hint:u.value.searching}):B.value?e("ul",{class:"search-pro-result-list"},f.value.map(({title:t,contents:s},c)=>{const A=h.value===c;return e("li",{class:["search-pro-result-list-item",{active:A}]},[e("div",{class:"search-pro-result-title"},t||u.value.defaultTitle),s.map((p,tt)=>{const O=A&&m.value===tt;return e(T,{to:F(p),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{d(l.queries.join(" ")),E(p),R()}},()=>[p.type==="text"?null:e(p.type==="title"?pt:p.type==="heading"?it:ht,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[p.type==="text"&&p.header?e("div",{class:"content-header"},p.header):null,e("div",W(p))])])})])})):u.value.emptyResult:S?P.value?[X(),Z()]:u.value.emptyHistory:u.value.emptyResult)}});export{St as default};
