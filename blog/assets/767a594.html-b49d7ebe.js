import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,e as t}from"./app-01a90253.js";const e={},p=t(`<p>在 Flutter 中，当需要填充容器（<code>Row</code>, <code>Column</code>, or <code>Flex</code>）剩余空间的时候，可以使用<code>Expanded</code>或<code>Flexible</code>，本文对这二者的差异做一分析。</p><h1 id="分析" tabindex="-1"><a class="header-anchor" href="#分析" aria-hidden="true">#</a> 分析</h1><p><code>Expanded</code> 比较容易理解，他会强制 child 改变大小，占据容器的剩余空间，如果有多个<code>Expanded</code>的话，会按照他们的 flex 占比来分配每个 child 可以占据的空间大小。</p><p><code>Flexible</code> 稍微特殊一些，有时候看起来似乎他的 child 占据的大小既不全是父布局的剩余空间，也不全是刚刚包裹 child 内容的大小。</p><p>让我们看一下<code>Flexible</code>的源码：</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">const</span> <span class="token class-name">Flexible</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>flex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>fit <span class="token operator">=</span> <span class="token class-name">FlexFit</span><span class="token punctuation">.</span>loose<span class="token punctuation">,</span>
  required <span class="token class-name">Widget</span> child<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">,</span> child<span class="token punctuation">:</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，默认情况下他使用的<code>fit</code>模式是<code>FlexFit.loose</code>，查阅文档定义可知：</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token class-name">FlexFit</span><span class="token punctuation">.</span>loose：<span class="token class-name">The</span> child can be at most <span class="token operator">as</span> large <span class="token operator">as</span> the available space <span class="token punctuation">(</span>but <span class="token operator">is</span> allowed to be smaller<span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token class-name">FlexFit</span><span class="token punctuation">.</span>tight：<span class="token class-name">The</span> child <span class="token operator">is</span> forced to fill the available space<span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也就是说，默认情况下，<code>Flexible</code>的 child 最大可以是父容器分配给<code>Flexible</code>的大小（假设为<code>MaxSzie</code>）。</p><p>但是，如果 child 的大小比这个<code>MaxSzie</code>要小的话，那么允许 child 按照自己的大小来显示。</p><p>而如果<code>Flexible</code>的<code>fit</code>是<code>FlexFit.tight</code>的话，就会强制 child 大小为<code>MaxSzie</code>，效果和<code>Expanded</code>一致，实际上<code>Expanded</code>就是<code>FlexFit.tight</code>模式的<code>Flexible</code>：</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">Expanded</span> <span class="token keyword">extends</span> <span class="token class-name">Flexible</span> <span class="token punctuation">{</span>
  <span class="token comment">/// Creates a widget that expands a child of a [Row], [Column], or [Flex]</span>
  <span class="token comment">/// so that the child fills the available space along the flex widget&#39;s</span>
  <span class="token comment">/// main axis.</span>
  <span class="token keyword">const</span> <span class="token class-name">Expanded</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
    int flex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    required <span class="token class-name">Widget</span> child<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">,</span> flex<span class="token punctuation">:</span> flex<span class="token punctuation">,</span> fit<span class="token punctuation">:</span> <span class="token class-name">FlexFit</span><span class="token punctuation">.</span>tight<span class="token punctuation">,</span> child<span class="token punctuation">:</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于上述的结论，我们可以从下面的代码中得到证实：</p><figure><img src="https://s3.bmp.ovh/imgs/2022/05/11/8559625d0d49ae28.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>home<span class="token punctuation">:</span> <span class="token class-name">BodyWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BodyWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">_BodyState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _BodyState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BodyWidget</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> double width <span class="token operator">=</span> <span class="token class-name">MediaQuery</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">final</span> int count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
      child<span class="token punctuation">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">.</span>shade200<span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
          children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token class-name">Row</span><span class="token punctuation">(</span>
              mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>max<span class="token punctuation">,</span>
              children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token class-name">Container</span><span class="token punctuation">(</span>
                    color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>teal<span class="token punctuation">,</span>
                    child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                      <span class="token string-literal"><span class="token string">&#39;Container Text &#39;</span></span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">Flexible</span><span class="token punctuation">(</span>
                  child<span class="token punctuation">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
                      color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
                      child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39; Text.Flexible Text.Flexible Text.Flexible.&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">Flexible</span><span class="token punctuation">(</span>
                  child<span class="token punctuation">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
                      color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;Flexible Text.&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">Flexible</span><span class="token punctuation">(</span>
                  child<span class="token punctuation">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
                      color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>lightGreen<span class="token punctuation">,</span> child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;Flexible.&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>
              height<span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
              width<span class="token punctuation">:</span> width<span class="token punctuation">,</span>
              child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
                itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>
                    width<span class="token punctuation">:</span> width <span class="token operator">/</span> count<span class="token punctuation">,</span>
                    child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
                      mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>max<span class="token punctuation">,</span>
                      children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                        <span class="token class-name">Container</span><span class="token punctuation">(</span>
                          width<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                          height<span class="token punctuation">:</span> index <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">30</span> <span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                          color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>purple<span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                          <span class="token class-name">Flexible</span><span class="token punctuation">(</span>
                            child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                              <span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">index</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span>
                              style<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>fontSize<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token punctuation">)</span><span class="token punctuation">,</span>
                          <span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                itemCount<span class="token punctuation">:</span> count<span class="token punctuation">,</span>
                scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h1><p><code>Expanded</code>和<code>Flexible</code>默认情况下都会按照<code>flex</code>占据父容器剩余的可用空间，但是不同的是，<code>Expanded</code>会强制 child 改变大小为父容器分配的大小，而<code>Flexible</code>则会告诉 child，<strong>最大只能是父容器分配的大小，要是 child 想要小一些的话，也可以按照 child 的大小显示</strong>。</p><p>如果改变<code>Flexible</code>的<code>fit</code>为<code>FlexFit.tight</code>的话，<code>Expanded</code>和<code>Flexible</code>没有差别。</p>`,18),c=[p];function o(l,i){return s(),a("div",null,c)}const k=n(e,[["render",o],["__file","767a594.html.vue"]]);export{k as default};
